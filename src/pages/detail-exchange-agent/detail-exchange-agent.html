<ion-header profile-background-color>

  <ion-navbar hideBackButton>
      <div class="flex-row-layout ai-center">
        <ion-title>Ver m치s</ion-title>
        <span class="flex"></span>
        <ion-title class="brand">OTC</ion-title>
      </div>
  </ion-navbar>
    
</ion-header>
  


<ion-content class="page" padding>
  <div class="fill-height flex-col-layout">
    <div class="flex scrollable no-padding">
        <div class="spacer-30"></div>
        <back-button [navCtrl]="navCtrl"></back-button>
        <stepper [currentStep]="2"></stepper>
        <div class="detailExchangeAgent__header page-content-container">
          <div class="text-center text-muted">Detalles de la casa de cambio</div>
          <ion-row class="text-muted" align-items-center>
            <ion-col col-6 >
              <div class="flex-row-layout jc-flex-end">
                <div class="detailExchangeAgent__icon-user w-background-image" [style.backgroundImage]="getAvatarUrl(transaction.exchangeAgent)">          
                </div>
              </div>
            </ion-col>
            <ion-col col-6>
              <div>{{detail_exchangue.name}}</div>
              <div>{{detail_exchangue.address}}</div>
              <div>RUC : {{detail_exchangue.documentNumber}}</div>
              <score [score]="transaction.exchangeAgent.score"></score>
            </ion-col>
          </ion-row>
          <div class="spacer-10"></div>
          <div class="details__wrapper">
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">        
                <span>Detalle de la solicitud Servicio:</span>
                <span class="flex"></span>
                <span>{{ transaction.exchangeAgentOffering.type == 'V' ? 'Venta' : 'Compra' }}</span>
              </div>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Tipo de moneda:</span>
                <span class="flex"></span>
                <span>{{ transaction.targetCurrency.name }}</span>
              </div>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Monto solicitado:</span>
                <span class="flex"></span>
                <span>{{ transaction.targetCurrency.symbol }}</span>&nbsp;
                <span>{{ transaction.amount }}</span>
              </div>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Valor de tipo de cambio:</span>
                <span class="flex"></span>
                <span>{{ transaction.fromCurrency.symbol }}</span>&nbsp;
                <span>{{ transaction.exchangeAgentOffering.type == 'V' ? 
                  transaction.exchangeAgentOffering.requestedCurrencyAmount : 
                  transaction.exchangeAgentOffering.receivedCurrencyAmount
                }}</span>
              </div>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Monto parcial a depositar a OTC:</span>
                <span class="flex"></span>
                <span>{{ transaction.currencyToDeposit.symbol }}</span>&nbsp;
                <!-- <span>{{ otcComission.content + transaction.amountToDeposit }}</span> -->
                <span>{{ transaction.amountToDeposit.toFixed(2) }}</span>
              </div>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Cobro por transacci칩n:</span>
                <span class="flex"></span>
                <span>{{ transaction.currencyToDeposit.symbol }}</span>&nbsp;
                <span>{{ otcComission.content }}</span>
              </div>
              <span><small>Incluye comisi칩n OTC m치s IGV</small></span>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Monto Total a depositar a OTC:</span>
                <span class="flex"></span>
                <span>{{ transaction.currencyToDeposit.symbol }}</span>&nbsp;
                <!-- <span>{{ otcComission.content + transaction.amountToDeposit }}</span> -->
                <span>{{ transaction.amountToDepositToOTC(otcComission.content) }}</span>
              </div>
            </div>
            <div class="pb-10">
              <div class="input flex-row-layout text-bold">
                <span>Monto Total a recibir de OTC:</span>
                <span class="flex"></span>
                <span>{{ transaction.currencyToReceive.symbol }}</span>&nbsp;
                <span>{{ transaction.amountToReceive }}</span>
              </div>
            </div>
          </div>
        </div>
    </div>
    <div class="flex-auto no-padding">
        <div class="spacer-20"></div>
        <div class="flex-col-layout ai-center">
          <button fluid ion-button color="secondary" (tap)="continue()">
            Seleccionar
          </button>
        </div>
    </div>
  </div>
</ion-content>
